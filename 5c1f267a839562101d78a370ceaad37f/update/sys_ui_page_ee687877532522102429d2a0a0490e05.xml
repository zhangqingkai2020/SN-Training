<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ui_page">
    <sys_ui_page action="INSERT_OR_UPDATE">
        <category>general</category>
        <client_script><![CDATA[function showConfirm() {
    if (confirm("Are you sure you want to update the field?")) {
        // 用户点击 OK
        var ga = new GlideAjax('UpdateFieldAjax');
        ga.addParam('sysparm_name', 'updateField');
        ga.addParam('sysparm_sys_id', '57af7aec73d423002728660c4cf6a71c'); // INC0009009 若在表单页面内用 g_form
        ga.getXMLAnswer(function(response) {
            var answer = response.responseXML.documentElement.getAttribute("answer");
            if (answer === 'success') {
                alert('Field updated!');
                location.reload(); // 或 g_form.refresh()
            } else {
                alert('Update failed.');
            }
        });
    } else {
        // 用户点击 Cancel
        alert("Update canceled.");
    }
}

function generatePDF() {
    var ga = new GlideAjax('GeneratePDF');
    ga.addParam('sysparm_name', 'generate');
    ga.getXMLAnswer(function(answer) {
        var srtJson = JSON.parse(answer);
        var attachmentId = srtJson.attachment_id;
        if (srtJson.status === "success") {
            var url = '/sys_attachment.do?sys_id=' + attachmentSysId;
            window.open(url, '_blank');
        } else {
            alert('生成失败，请检查 PDF 配置。');
        }
    });
}]]></client_script>
        <description/>
        <direct>false</direct>
        <endpoint>x_1639325_sn_train_ajax_confirm_test.do</endpoint>
        <html><![CDATA[<?xml version="1.0" encoding="utf-8" ?>
<j:jelly xmlns:j="jelly:core" xmlns:g="glide" xmlns:gs="jelly:glide" xmlns:g2="glide_v2">
    <g:ui_form>
        <div>
            <h1>上传PDF</h1>
        </div>
        <button onclick="generatePDF()">生成 PDF</button>
        <div>
            <h1>更新incident表的INC0009009这条记录的Short description这个字段</h1>
        </div>
        <button onclick="showConfirm()">Update Field</button>
    </g:ui_form>
	 <h3>Manage Attachments</h3>
    <j:include page="attachments">
      <j:param name="table" value="incident" />
      <j:param name="sys_id" value="57af7aec73d423002728660c4cf6a71c" />
    </j:include>

</j:jelly>]]></html>
        <name>ajax_confirm_test</name>
        <processing_script/>
        <sys_class_name>sys_ui_page</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2025-05-23 06:10:01</sys_created_on>
        <sys_id>ee687877532522102429d2a0a0490e05</sys_id>
        <sys_mod_count>20</sys_mod_count>
        <sys_name>ajax_confirm_test</sys_name>
        <sys_package display_value="SN Training" source="x_1639325_sn_train">5c1f267a839562101d78a370ceaad37f</sys_package>
        <sys_policy/>
        <sys_scope display_value="SN Training">5c1f267a839562101d78a370ceaad37f</sys_scope>
        <sys_update_name>sys_ui_page_ee687877532522102429d2a0a0490e05</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2025-05-23 13:38:10</sys_updated_on>
    </sys_ui_page>
    <sys_es_latest_script action="INSERT_OR_UPDATE">
        <id>ee687877532522102429d2a0a0490e05</id>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2025-05-23 06:09:59</sys_created_on>
        <sys_id>69e87cfb53e122102429d2a0a0490e47</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2025-05-23 06:09:59</sys_updated_on>
        <table>sys_ui_page</table>
        <use_es_latest>true</use_es_latest>
    </sys_es_latest_script>
</record_update>
